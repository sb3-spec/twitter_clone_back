(this.webpackJsonpworse_twitter=this.webpackJsonpworse_twitter||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(7),s=n.n(a),o=n(2);var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var r=n[c].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t};function l(e,t,n,c){var r;c&&(r=JSON.stringify(c));var a=new XMLHttpRequest,s="http://localhost:8000/api".concat(t),o=i("csrftoken");a.responseType="json",a.open(e,s),a.setRequestHeader("Content-Type","application/json"),o&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRFToken",o)),a.onload=function(){403===a.status&&(-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true"));n(a.response,a.status)},a.onerror=function(){n({message:"The request was an error"},400)},a.send(r)}function u(e,t,n){var c="/tweets/";e&&(c+="?username=".concat(e)),null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,t)}function d(e,t,n){var c="/tweets/feed/";null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,t,{username:e})}function j(e,t){var n="/tweets/data/";t&&(n+="".concat(t)),l("GET",n,e)}var f=n(5),b=n.n(f),O=n(6);function w(e,t,n){l(n,"/profiles/".concat(t&&t),e)}var m=n(1),p=function(e){var t=e.user,n=e.hideLink;return n?Object(m.jsx)(x,{user:t,hideLink:n,children:Object(m.jsx)("span",{className:"px-3 py-2 my-2 rounded-circle bg-dark text-white",children:t.username?t.username[0]:"a"})}):Object(m.jsx)("span",{className:"px-3 py-2 my-2 rounded-circle bg-dark text-white",children:t.username?t.username[0]:"a"})},x=function(e){var t=e.user,n=e.children;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("span",{className:"pointer",onClick:function(e){e.stopPropagation(),window.location.href="/profiles/".concat(t&&t.username)},children:n})})};function h(e){var t=e.user,n=e.includeFullName,c=e.hideLink,r=n?"".concat(t.first_name," ").concat(t.last_name):"".concat(t.username);return Object(m.jsxs)(m.Fragment,{children:[r," ",c?"@".concat(t.username):Object(m.jsx)(x,{user:t,children:"@".concat(t.username)})]})}var v=n(12),N=n.n(v),k=(n(13),function(e){var t=e.username,n=e.className,r=Object(c.useState)(!1),a=Object(o.a)(r,2),s=a[0],i=a[1],l=Object(c.useState)(),u=Object(o.a)(l,2),d=u[0],j=u[1],f=function(e,t){i(!0),200===t?j(e):404===t?alert("There was an error finding the requested user"):alert("server issue")};return Object(c.useEffect)((function(){var e=function(){var e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:s||w(f,t,"GET");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),s?d?Object(m.jsx)(g,{user:d,setProfile:j,className:n}):Object(m.jsx)("span",{children:"User not found"}):"Loading"});function g(e){var t=e.user,n=e.setProfile,c=e.className,r=function(e,t){200===t?n(e):403===t?window.location.href="/login":alert("We could not find the profile in question. Please try again later.")};return t?Object(m.jsxs)("div",{className:"profile-container ".concat(c),children:[Object(m.jsx)(p,{user:t,hideLink:!0}),Object(m.jsx)("p",{children:Object(m.jsx)(h,{user:t,hideLink:!0})}),Object(m.jsxs)("div",{className:"follower-following-display",children:[N()(t.follower_count||0).format("0a")," ",1===t.follower_count?"Follower":"Followers"," ",N()(t.following_count||0).format("0a")," ","Following"]}),Object(m.jsx)("div",{className:"location",children:t.location}),Object(m.jsx)("div",{className:"bio",children:t.bio}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),t&&w(r,t.username,"POST")},className:"btn btn-primary",children:t.is_following?"Unfollow":"Follow"})]}):null}n(22);var T=function(e){var t=e.tweet,n=e.currentUser,r=e.setIsDeleted,a=Object(c.useState)(!1),s=Object(o.a)(a,2),i=s[0],u=s[1],d=Object(c.useState)([]),j=Object(o.a)(d,2),f=j[0],b=j[1],O=Object(c.createRef)();function w(e){var c=e.content,a=function(e,t){200===t&&r(!0)};return Object(m.jsx)("div",{className:"option",onClick:function(e){e.preventDefault(),e.stopPropagation(),u(!1),"Delete Tweet"===c&&function(e,t,n){var c="/tweets/";t&&(c+="".concat(t,"/delete/")),l("POST",c,e,{username:n})}(a,t.id,n)},children:Object(m.jsx)("p",{className:"option__content",children:c})})}return window.addEventListener("mousedown",(function(e){O.current&&!O.current.contains(e.target)&&(e.preventDefault(),e.stopPropagation(),u(!1))})),Object(c.useEffect)((function(){t.user&&(t.user.username!==n?b(["Report Tweet","Block @".concat(t.user.username),"Follow @".concat(t.user.username)]):b(["Delete Tweet","Pin to profile"]))}),[b,n,t.user]),i?Object(m.jsx)("div",{className:"modal__background",children:Object(m.jsx)("div",{className:"options-btn__toggled",ref:O,children:f.map((function(e){return Object(m.jsx)(w,{content:e,currentUser:n})}))})}):Object(m.jsx)("div",{onClick:function(e){e.stopPropagation(),e.preventDefault(),u(!0)},className:"options-btn__untoggled",children:Object(m.jsx)("i",{className:"fas fa-ellipsis-h options-icon"})})};n(23);var S=function e(t){var n=t.tweet,r=t.className,a=t.currentUser,s=(t.nextUrl,Object(c.useState)(!1)),i=Object(o.a)(s,2),u=i[0],d=i[1],f=Object(c.useState)(!1),v=Object(o.a)(f,2),N=v[0],k=v[1],g=Object(c.useState)(n.likes?n.likes:0),S=Object(o.a)(g,2),_=S[0],E=S[1],y=Object(c.useState)(!1),L=Object(o.a)(y,2),P=L[0],D=L[1],R=Object(c.useState)(),U=Object(o.a)(R,2),C=(U[0],U[1]),q=Object(c.useState)(!1),F=Object(o.a)(q,2),G=(F[0],F[1]),I=Object(c.useState)(!1),H=Object(o.a)(I,2),B=H[0],M=H[1],X=function(e){e.preventDefault(),e.stopPropagation(),window.location.href="/".concat(n.id)},J=function(e,t){403===t?window.location.href="/login/":404!==t&&j(z,n.id)};function A(e,t){t.stopPropagation(),t.preventDefault();var c=e;if("like"===e)u&&(c="unlike");else if("retweet"===e&N)return;!function(e,t,n,c){l("POST","/tweets/action/",n,{id:e,action:t,username:c})}(n.id,c,J)}var W=function(t){t.callback;return n.parent?Object(m.jsxs)("div",{onClick:function(e){return X(e)},children:[Object(m.jsxs)("p",{className:"retweet-header",children:["retweeted by ",Object(m.jsx)(x,{user:n.user})]}),Object(m.jsx)(e,{tweet:n.parent,className:n.content?"retweet":"retweet no-border",currentUser:a})]}):null},z=function(e,t){200===t?(k(e.didRetweet),d(e.didLike),E(e.likes),M(!0),0===e.likes&&d(!1)):console.log(e,t)},K=function(e,t){200===t?(C(e),G(!0)):console.log(e,t)};return Object(c.useEffect)((function(){var e=!0,t=function(){var t=Object(O.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:B||(j(z,n.id),w(K,n.user.username,"GET"));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[B,n]),!P&&(n.content||n.parent)&&Object(m.jsxs)("div",{className:r+" overall-container",onClick:function(e){return X(e)},children:[!n.parent&&Object(m.jsxs)("div",{className:"profile-container d-flex",children:[Object(m.jsx)("div",{className:"mx-1 profile-picture",children:n.user?Object(m.jsx)(x,{children:Object(m.jsx)(p,{user:n.user})}):"Loading..."}),Object(m.jsx)("p",{className:"tweet-header",children:Object(m.jsx)(h,{user:n.user})}),Object(m.jsx)(T,{tweet:n,currentUser:a,setIsDeleted:D})]}),Object(m.jsxs)("div",{className:"tweet-container",children:[""!==n.content&&Object(m.jsx)("div",{className:"tweet-content-wrapper",children:Object(m.jsx)("p",{className:"tweet-text",children:"".concat(n.content)})}),n.parent?Object(m.jsx)("div",{className:"retweet-container",children:Object(m.jsx)(W,{})}):Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("i",{className:N?"fas fa-retweet btn-icon rt-icon text-green":"fas fa-retweet btn-icon rt-icon",onClick:function(e){return A("retweet",e)}}),Object(m.jsxs)("div",{className:"like-btn__container",children:[Object(m.jsx)("i",{className:u?"fas fa-heart btn-icon like-icon red-text":"far fa-heart btn-icon like-icon",onClick:function(e){return A("like",e)}}),_]})]})]})]})};n(24);var _=function(e){var t=e.tweetId,n=Object(c.useState)(!1),r=Object(o.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(),u=Object(o.a)(i,2),d=u[0],j=u[1],f=Object(c.useState)(null),b=Object(o.a)(f,2),O=b[0],w=b[1],p=function(e,t){200===t&&w(e)},x=function(e,t){200===t&&j(e.username)};return Object(c.useEffect)((function(){!1===a&&(!function(e,t){var n="/tweets/";e&&(n+="".concat(e)),l("GET",n,t,{tweet_id:e})}(t,p),l("GET","/users/auth/",x),s(!0))}),[s,t,a]),null!==O&&Object(m.jsx)("div",{className:"detail-container",children:Object(m.jsx)("div",{className:"d-flex",children:Object(m.jsx)("div",{className:"col-11",children:Object(m.jsx)(S,{tweet:O,currentUser:d})})})})},E=n(4),y=(n(25),n(14));n(27);var L=function(e){var t=Object(c.useRef)(""),n=function(t,n){var c=Object(E.a)(e.newTweets);201===n?(c.unshift(t),e.setNewTweets(c),u(e.username,e.callback)):alert("An error has occurred. Please try again")},r=function(c){c.preventDefault();var r,a,s,o=t.current.value;r=o,a=n,s=e.username,l("POST","/tweets/create/",a,{content:r,username:s}),t.current.value=""};return Object(m.jsx)("div",{className:"tweet-form-container",children:Object(m.jsx)("div",{className:"form_container",children:Object(m.jsxs)("form",{onSubmit:function(e){return r(e)},children:[Object(m.jsx)("textarea",{ref:t,required:!0,className:"form-control"}),Object(m.jsx)(y.a,{variant:"primary",children:"Tweet"})]})})})},P=(n(11),function(e){var t=e.newTweets,n=e.setNewTweets,r=e.tweets,a=e.setTweets,s=e.username,o=e.tweetsDidSet,i=e.callback,l=e.nextUrl,u=e.handleLoadNextResponse;return Object(c.useEffect)((function(){t.length>0&&(a([].concat(Object(E.a)(t),Object(E.a)(r))),n([]))}),[t]),Object(c.useEffect)((function(){var e=!0,t=function(){var t=Object(O.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(!1!==o){t.next=5;break}return t.next=5,d(s,i);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[o,s,i]),Object(m.jsxs)("div",{className:"tweet_feed__container",children:[r.map((function(e,t){return Object(m.jsx)(S,{tweet:e,idx:t,callback:i,currentUser:s,nextUrl:l},"".concat(t,"-{tweet.id}"))})),null!==l&&Object(m.jsx)("button",{className:"btn btn-outline btn-primary",onClick:function(e){e.preventDefault(),null!==l&&d(s,u,l)},children:"Load More"})]})}),D=function(e){var t=e.newTweets,n=e.setNewTweets,r=e.tweets,a=e.setTweets,s=e.username,o=e.tweetsDidSet,i=e.callback,l=e.nextUrl,d=e.handleLoadNextResponse;return Object(c.useEffect)((function(){t.length>0&&(a([].concat(Object(E.a)(t),Object(E.a)(r))),n([]))}),[t,r,a,n]),Object(c.useEffect)((function(){!1===o&&u(s,i)}),[o,s,i]),Object(m.jsxs)("div",{className:"tweet_feed__container",children:[r.map((function(e,t){return Object(m.jsx)(S,{tweet:e,idx:t,callback:i,currentUser:s},"".concat(t,"-{tweet.id}"))})),null!==l&&Object(m.jsx)("button",{className:"btn btn-outline btn-primary",onClick:function(e){e.preventDefault(),null!==l&&u(s,d,l)},children:"Load More"})]})};var R=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!1),i=Object(o.a)(s,2),u=i[0],d=i[1],j=Object(c.useState)(!0),f=Object(o.a)(j,2),b=f[0],O=f[1],w=Object(c.useState)(),p=Object(o.a)(w,2),x=p[0],h=p[1],v=e.username,N=e.handleLoadNext,k=e.callback,g=function(e,t){console.log(e.results),200===t&&(a(e.results),d(!0),h(e.next))};return Object(c.useEffect)((function(){var e=!0;return e&&(!function(e,t,n){var c="/tweets";null!==t&&void 0!==t&&(c+="".concat(t,"/tweets/")),null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,e)}(g,v),O(!1)),function(){e=!1}}),[O,N,v]),!b&&u?Object(m.jsxs)("div",{className:"tweet_feed__container",children:[r.map((function(e,t){return Object(m.jsx)(S,{tweet:e,idx:t,callback:k,currentUser:v},"".concat(t,"-{tweet.id}"))})),null!==x&&Object(m.jsx)("button",{className:"btn btn-outline btn-primary",onClick:N,children:"Load More"})]}):null};var U=function(e){var t=e.username,n=e.className,c=e.handleLoadNextResponse,r=e.nextUrl,a=e.callback;return Object(m.jsxs)("div",{children:[Object(m.jsx)(k,{username:t,className:n,handleLoadNextResponse:c}),Object(m.jsx)(R,{user:t,handleLoadNextResponse:c,nextUrl:r,callback:a})]})};n(28);var C=function(e){var t=e.setFeedOrProfile,n=e.feedOrProfile,c="btn btn-primary",r="btn btn-error";return Object(m.jsxs)("div",{className:"navbar-container",children:["Navbar, Coming soon!",Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),t("profile")},className:"feed"===n?c:r,children:"Profile"}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),t("feed")},className:"feed"===n?r:c,children:"Home"})]})};var q=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)([]),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(c.useState)(!1),j=Object(o.a)(d,2),f=j[0],b=j[1],O=Object(c.useState)(),p=Object(o.a)(O,2),x=p[0],h=p[1],v=Object(c.useState)(),N=Object(o.a)(v,2),k=N[0],g=N[1],T=Object(c.useState)("feed"),S=Object(o.a)(T,2),_=S[0],y=S[1],R=e.username;function q(e,t){200===t?(u(e.results),b(!0),h(e.next)):alert("There was an error")}var F=function(e,t){if(200===t){var n=Object(E.a)(l).concat(e.results);u(n),h(e.next)}else alert("There was an error")},G=function(e,t){g(e.username)};return Object(c.useEffect)((function(){w(G,R,"GET")}),[R]),Object(m.jsxs)("div",{className:"home-container",children:[Object(m.jsx)(C,{setFeedOrProfile:y,feedOrProfile:_}),"feed"===_?Object(m.jsxs)("div",{className:"twitter_feed",children:[Object(m.jsx)(L,{username:k,newTweets:r,setNewTweets:a,tweets:l,setTweets:u,tweetsDidSet:f,callback:q}),k?Object(m.jsx)(P,{newTweets:r,setNewTweets:a,tweets:l,setTweets:u,username:k,tweetsDidSet:f,setTweetsDidSet:b,callback:q,nextUrl:x,handleLoadNextResponse:F}):Object(m.jsx)(D,{newTweets:r,setNewTweets:a,tweets:l,setTweets:u,username:k,tweetsDidSet:f,setTweetsDidSet:b,callback:q,nextUrl:x,handleLoadNextResponse:F})]}):Object(m.jsx)(U,{username:R,callback:q,className:"profile-view",handleLoadNextResponse:F})]})},F=r.a.createElement,G=document.getElementById("root");G&&s.a.render(F(q,G.dataset),G);var I=document.getElementById("global_tweets");I&&s.a.render(Object(m.jsx)(D,{}),I);var H=document.getElementById("tweet_feed");if(H){var B=F(P,H.dataset);s.a.render(B,H)}var M=document.getElementById("tweet-detail-view");M&&s.a.render(F(_,M.dataset),M),document.querySelectorAll(".twitter-profile-badge").forEach((function(e){s.a.render(F(U,e.dataset),e)}))}],[[29,1,2]]]);
//# sourceMappingURL=main.bc040a68.chunk.js.map