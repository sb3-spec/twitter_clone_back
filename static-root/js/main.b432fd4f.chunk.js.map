{"version":3,"sources":["tweet_lookup/get_cookie.js","tweet_lookup/lookup.js","tweets/tweet_functions/functions.js","tweets/components/Tweet.jsx","tweets/components/TweetDetail.jsx","tweets/components/TweetList.jsx","tweets/components/TweetForm.jsx","tweets/components/Sidebar.jsx","pages/Home.jsx","index.js"],"names":["getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","lookup","method","endpoint","callback","data","jsonData","JSON","stringify","xhr","XMLHttpRequest","url","csrftoken","responseType","open","setRequestHeader","onload","response","status","onerror","send","apiTweetList","username","Tweet","tweet","className","props","useState","didLike","setDidLike","didRetweet","setDidRetweet","likes","setLikes","myCallback","handleLink","e","preventDefault","stopPropagation","window","location","href","id","handleBackendActionEvent","console","log","prevState","handleTweetAction","action","event","currentAction","tweetId","apiTweetAction","Retweet","parent","onClick","useEffect","content","variant","color","TweetDetail","didLookup","setDidLookup","setTweet","handleBackendLookup","alert","apiTweetDetail","TweetList","newTweets","setNewTweets","tweets","setTweets","tweetsDidSet","setTweetsDidSet","map","idx","TweetForm","textAreaRef","useRef","handleBackendRefresh","tempNewTweets","unshift","handleSubmit","newTweetContent","current","value","onSubmit","ref","required","Sidebar","Home","React","createElement","tweetList","getElementById","MyComponent","dataset","ReactDOM","render","tweetDetailElements"],"mappings":"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","file":"static/js/main.b432fd4f.chunk.js","sourcesContent":["function getCookie(name) {\r\n    let cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        const cookies = document.cookie.split(';');\r\n        for (let i = 0; i < cookies.length; i++) {\r\n            const cookie = cookies[i].trim();\r\n            // Does this cookie string begin with the name we want?\r\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}\r\n\r\nexport default getCookie","import { getCookie } from \".\";\r\n\r\nexport function lookup(method, endpoint, callback, data) {\r\n  let jsonData;\r\n  if (data) {\r\n    jsonData = JSON.stringify(data)\r\n  }\r\n\r\n  const xhr = new XMLHttpRequest()\r\n  const url = `http://localhost:8000/api${endpoint}`\r\n  const csrftoken = getCookie('csrftoken')\r\n  xhr.responseType = \"json\"\r\n  xhr.open(method, url)\r\n  xhr.setRequestHeader('Content-Type', 'application/json')\r\n  if (csrftoken) {\r\n    // xhr.setRequestHeader('HTTP_X_REQUESTED_WITH', 'XMLHttpRequest')\r\n    // xhr.setRequestHeader(\"X-Requested-With\", 'XMLHttpRequest')\r\n    xhr.setRequestHeader(\"X-CSRFToken\", csrftoken)  \r\n  } \r\n\r\n  xhr.onload = function() {\r\n    callback(xhr.response, xhr.status)\r\n  }\r\n  xhr.onerror = () => {\r\n    callback({\"message\": \"The request was an error\"}, 400)\r\n  }\r\n  xhr.send(jsonData)\r\n}\r\n\r\n","import { lookup } from '../../tweet_lookup/lookup'\r\n\r\nexport function apiTweetCreate(newTweet, callBack) {\r\n    lookup(\"POST\", \"/tweets/create/\", callBack, {content: newTweet})\r\n}\r\n  \r\nexport function apiTweetList(username, callback) {\r\n    let endpoint = '/tweets/'\r\n\r\n    if (username) {\r\n        endpoint += `?username=${username}`\r\n    }\r\n    lookup(\"GET\", endpoint, callback)\r\n}\r\n\r\nexport function apiTweetDetail(tweetId, callback) {\r\n    let endpoint = '/tweets/'\r\n\r\n    if (tweetId) {\r\n        endpoint += `${tweetId}`\r\n    }\r\n    lookup(\"GET\", endpoint, callback)\r\n}\r\n\r\nexport function apiTweetAction(tweetId, action, callback) {\r\n    const data = {id: tweetId, action: action}\r\n    lookup(\"POST\", \"/tweets/action/\", callback, data)\r\n}\r\n","import { Button } from 'bootstrap-react'\r\nimport { useState, useEffect } from 'react';\r\nimport '../styles/Tweet.css'\r\nimport { apiTweetAction, apiTweetList } from '../tweet_functions'\r\n \r\nfunction Tweet({ tweet, callback, className, props }) { \r\n    const [didLike, setDidLike] = useState(false);\r\n    const [didRetweet, setDidRetweet] = useState(false);\r\n    const [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0)\r\n    const myCallback = callback \r\n\r\n    const handleLink = (e) => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        window.location.href = `/${tweet.id}`\r\n    }    \r\n    \r\n\r\n    const handleBackendActionEvent = (response, status) => {\r\n        console.log(status, response)\r\n        if (status === 201 || status === 200) {\r\n            setLikes(response.likes)\r\n            setDidLike((prevState) => !prevState)\r\n            if (status === 201) {\r\n                setDidRetweet((prevState) => !prevState)\r\n            }\r\n            apiTweetList(props.username, callback)\r\n        } else {\r\n            setDidLike((prevState) => !prevState)\r\n        }\r\n    }\r\n\r\n\r\n    function handleTweetAction(action, event) {\r\n        event.stopPropagation()\r\n        event.preventDefault()\r\n        \r\n\r\n        let currentAction = action\r\n        \r\n        if (action === 'like') {\r\n            if (didLike) {\r\n                currentAction = 'unlike'\r\n            }   \r\n        } else if (action === 'retweet' & didRetweet) {\r\n            return\r\n        }\r\n        apiTweetAction(tweet.id, currentAction, handleBackendActionEvent)\r\n    }\r\n\r\n    const Retweet = () => {\r\n        return tweet.parent ? (\r\n            <div onClick={((e) => handleLink(e))}>\r\n                <p>Retweet</p>\r\n                <div className=''>\r\n                    <Tweet tweet={tweet.parent} callback={myCallback} className=\"retweet\" props={props} />\r\n                </div>\r\n            </div>\r\n        ) : null\r\n    }\r\n\r\n    useEffect(() => {\r\n        setLikes(tweet.likes)\r\n    }, [tweet.likes]);\r\n\r\n    return (\r\n        <div className={className + \" overall-container\"} onClick={((e) => handleLink(e))}>\r\n            <div className=\"tweet-container\">\r\n                <div className=\"tweet-content-wrapper\">\r\n                        <p className=\"tweet-text\">{`${tweet.id}   ${tweet.content}`}</p>\r\n                </div>\r\n                <div className=\"retweet-container\">\r\n                    <Retweet />\r\n                </div>\r\n                {!tweet.parent &&\r\n                <div className=\"buttons\">\r\n                    \r\n                    <Button variant={didLike ? \"primary\" : \"outline\"} onClick={((e) => handleTweetAction(\"like\", e))}>\r\n                        <i className=\"far fa-thumbs-up\"></i>{likes}\r\n                    </Button>\r\n                    <div className=\"retweet-btn\">\r\n                        <Button variant={!didRetweet && \"outline\"} color=\"success\" onClick={((e) => handleTweetAction(\"retweet\", e))}><i className=\"fas fa-retweet\"></i></Button>\r\n                    </div>\r\n                </div>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Tweet\r\n\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { apiTweetDetail } from '../tweet_functions'\r\nimport Tweet from './Tweet'\r\n\r\nfunction TweetDetail(props) {\r\n    const { tweetId } = props\r\n    const [didLookup, setDidLookup] = useState(false)\r\n    const [tweet, setTweet] = useState(null)\r\n\r\n    const handleBackendLookup = (response, status) => {\r\n        if (status === 200) {\r\n            setTweet(response)\r\n            console.log(response)\r\n        } else {\r\n            alert(\"There was an error finding your tweet. Please try again.\")\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (didLookup === false) {\r\n            apiTweetDetail(tweetId, handleBackendLookup)\r\n            setDidLookup(true)\r\n        }\r\n    }, [setDidLookup, tweetId, didLookup])\r\n\r\n    return tweet === null ? null : <Tweet tweet={tweet} />\r\n}\r\n\r\nexport default TweetDetail\r\n","import { useEffect, useState } from 'react'\r\nimport Tweet from './Tweet'\r\nimport { apiTweetList } from '../tweet_functions'\r\nimport '../styles/TweetList.css'\r\n\r\n\r\nconst TweetList = ({ newTweets, setNewTweets, props }) => {\r\n\r\n  const username = props.username\r\n    \r\n    const [tweets, setTweets] = useState([])\r\n    const [tweetsDidSet, setTweetsDidSet] = useState(false)\r\n\r\n    function myCallback (response, status) {\r\n      if (status === 200) {\r\n        setTweets(response)\r\n        setTweetsDidSet(true)\r\n      } else {\r\n        alert(\"There was an error\")\r\n      }\r\n    };\r\n\r\n    useEffect(() => {\r\n      if (newTweets.length > 0) {\r\n        setTweets([...newTweets, ...tweets])\r\n        setNewTweets([])\r\n      }\r\n      // eslint-disable-next-line\r\n    }, [newTweets]);\r\n    \r\n    useEffect(() => {\r\n      if (tweetsDidSet === false) {\r\n        apiTweetList(username, myCallback)\r\n        setTweetsDidSet(true)\r\n      }\r\n\r\n    }, [tweets, tweetsDidSet, setTweetsDidSet, username]);\r\n\r\n    return (\r\n        <div className=\"tweet_list__container\">\r\n            {tweets.map((tweet, idx) => {return <Tweet tweet={tweet} idx={idx} key={`${idx}-{tweet.id}`} callback={myCallback} props={props}/>})}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TweetList","import { Button } from 'bootstrap-react'\r\nimport React, { useRef } from 'react'\r\nimport { apiTweetCreate } from '../tweet_functions'\r\n\r\nimport '../styles/TweetForm.css'\r\n\r\n\r\nfunction TweetForm({ newTweets, setNewTweets }) {\r\n    const textAreaRef = useRef('')\r\n\r\n    const handleBackendRefresh = (response, status) => {\r\n        // backened api handler \r\n        let tempNewTweets = [...newTweets]\r\n        if (status === 201) {\r\n            tempNewTweets.unshift(response)\r\n            setNewTweets(tempNewTweets)\r\n        } else {\r\n            console.log(response)\r\n            alert(\"An error has occurred. Please try again\")\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        // backend api request\r\n        e.preventDefault()\r\n        const newTweetContent = textAreaRef.current.value\r\n        apiTweetCreate(newTweetContent, handleBackendRefresh)\r\n        textAreaRef.current.value = ''\r\n    }\r\n\r\n    return (\r\n            <div className=\"tweet-form-container\">\r\n                <div className=\"profile_pic\">\r\n                    IMG\r\n                </div>\r\n                <div className=\"form_container\">\r\n                    <form onSubmit={((e) => handleSubmit(e))}>\r\n                        <textarea ref={textAreaRef} required={true} className=\"form-control\">\r\n                        </textarea>\r\n                        <Button variant=\"primary\">Tweet</Button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default TweetForm\r\n","function Sidebar() {\r\n    return (\r\n        <div>\r\n            Hello World\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useState } from 'react'\r\n\r\n\r\nimport TweetList from \"../tweets/components/TweetList\"\r\nimport '../styles/Home.css'\r\nimport TweetForm from \"../tweets/components/TweetForm\"\r\nimport Sidebar from \"../tweets/components/Sidebar\"\r\n\r\nfunction Home(props) {\r\n    const [newTweets, setNewTweets] = useState([])\r\n    console.log(props)\r\n\r\n    return (\r\n        <div className=\"home-container\">\r\n            <Sidebar />\r\n            <div className=\"twitter_feed\">\r\n                <TweetForm  newTweets={newTweets} setNewTweets={setNewTweets} />\r\n                <TweetList newTweets={newTweets} setNewTweets={setNewTweets} props={props} />\r\n            </div>\r\n            <Sidebar />     \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport TweetDetail from './tweets/components/TweetDetail'\n\nimport Home from './pages/Home';\n\n\n// const appEl = document.getElementById('root')\n// const e = document.createElement\n// if (appEl) {\n//     MyComponent = e\n//     ReactDOM.render(<App />, appEl);\n// }\nconst e = React.createElement\nconst tweetList = document.getElementById(\"root\")\nif (tweetList) {\n    const MyComponent = e(Home, tweetList.dataset)\n    ReactDOM.render(MyComponent, tweetList);\n}\n\nconst tweetDetailElements = document.getElementById(\"tweet-detail-view\")\n\nif (tweetDetailElements) {\n    ReactDOM.render(e(TweetDetail, tweetDetailElements.dataset), tweetDetailElements)\n}\n\n\n\n"],"sourceRoot":""}