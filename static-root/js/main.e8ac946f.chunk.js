(this.webpackJsonpworse_twitter=this.webpackJsonpworse_twitter||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(8),s=n.n(r),i=n(2);var o=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var a=n[c].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t};function l(e,t,n,c){var a;c&&(a=JSON.stringify(c));var r=new XMLHttpRequest,s="http://localhost:8000/api".concat(t),i=o("csrftoken");r.responseType="json",r.open(e,s),r.setRequestHeader("Content-Type","application/json"),i&&(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",i)),r.onload=function(){if(403===r.status){var e=r.response.detail,t=window.location.href.indexOf("login");"Authentication credentials were not provided."===e&&-1===t&&(window.location.href="/login?showLoginRequired=true")}n(r.response,r.status)},r.onerror=function(){n({message:"The request was an error"},400)},r.send(a)}function u(e,t,n){var c="/tweets/";e&&(c+="?username=".concat(e)),null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,t)}function j(e,t){var n="/tweets/feed/";null!==t&&void 0!==t&&(n=t.replace("http://localhost:8000/api","")),l("GET",n,e)}var d=n(1),f=function(e){var t=e.user;return Object(d.jsx)("span",{className:"px-3 py-2 my-2 rounded-circle bg-dark text-white",children:t.username[0]})},b=function(e){var t=e.user;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("span",{className:"pointer",onClick:function(e){e.stopPropagation(),window.location.href="/profiles/".concat(t.username)},children:["@",t.username]})})};n(16);var w=function e(t){var n=t.tweet,a=t.callback,r=t.className,s=t.currentUser,o=Object(c.useState)(!1),j=Object(i.a)(o,2),w=j[0],O=j[1],m=Object(c.useState)(!1),v=Object(i.a)(m,2),h=v[0],p=v[1],x=Object(c.useState)(n.likes?n.likes:0),N=Object(i.a)(x,2),k=N[0],g=N[1],T=a,S=function(e){e.preventDefault(),e.stopPropagation(),window.location.href="/".concat(n.id)},y=function(e,t){console.log(t,e),201===t||200===t?(g(e.likes),O((function(e){return!e})),201===t?p((function(e){return!e})):200===t&&e.is_logged_in&&(window.location.href="/"),u(s,a)):O((function(e){return!e}))};function D(e,t){t.stopPropagation(),t.preventDefault();var c=e;if("like"===e)w&&(c="unlike");else if("retweet"===e&h)return;!function(e,t,n,c){l("POST","/tweets/action/",n,{id:e,action:t,username:c})}(n.id,c,y,s)}var E=function(){return n.parent?Object(d.jsxs)("div",{onClick:function(e){return S(e)},children:[Object(d.jsxs)("p",{className:"retweet-header",children:["retweeted by ",Object(d.jsx)(b,{user:n.user})]}),Object(d.jsx)("div",{className:"",children:Object(d.jsx)(e,{tweet:n.parent,callback:T,className:"retweet",currentUser:s})})]}):null};return Object(c.useEffect)((function(){g(n.likes)}),[n.likes]),Object(c.useEffect)((function(){var e=localStorage.getItem("tweetActionData");if(e){var t=JSON.parse(e),n=t.likeData,c=t.retweetData;n&&(console.log(n),O(n)),c&&p(c)}}),[]),Object(c.useEffect)((function(){var e={likeData:w,retweetData:h};e=JSON.stringify(e),localStorage.setItem("tweetActionData",e)})),Object(d.jsxs)("div",{className:r+" overall-container",onClick:function(e){return S(e)},children:[!n.parent&&Object(d.jsxs)("div",{className:"profile-container d-flex",children:[Object(d.jsx)("div",{className:"mx-1 profile-picture",children:Object(d.jsx)(f,{user:n.user})}),Object(d.jsx)("p",{className:"tweet-header",children:Object(d.jsx)(b,{user:n.user})})]}),Object(d.jsxs)("div",{className:"tweet-container",children:[""!==n.content&&Object(d.jsx)("div",{className:"tweet-content-wrapper",children:Object(d.jsx)("p",{className:"tweet-text",children:"".concat(n.content)})}),n.parent?Object(d.jsx)("div",{className:"retweet-container",children:Object(d.jsx)(E,{})}):Object(d.jsxs)("div",{className:"buttons",children:[Object(d.jsx)("i",{className:h?"fas fa-retweet btn-icon rt-icon text-green":"fas fa-retweet btn-icon rt-icon",onClick:function(e){return D("retweet",e)}}),Object(d.jsxs)("div",{className:"like-btn__container",children:[Object(d.jsx)("i",{className:w?"fas fa-heart btn-icon like-icon red-text":"far fa-heart btn-icon like-icon",onClick:function(e){return D("like",e)}}),k]})]})]})]})};n(17);var O=function(e){var t=e.tweetId,n=Object(c.useState)(!1),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(null),u=Object(i.a)(o,2),j=u[0],f=u[1],b=function(e,t){200===t?(f(e),console.log(e)):alert("There was an error finding your tweet. Please try again.")};return Object(c.useEffect)((function(){!1===r&&(!function(e,t){var n="/tweets/";e&&(n+="".concat(e)),l("GET",n,t)}(t,b),s(!0))}),[s,t,r]),null!==j&&Object(d.jsx)("div",{className:"detail-container",children:Object(d.jsx)("div",{className:"d-flex",children:Object(d.jsx)("div",{className:"col-11",children:Object(d.jsx)(w,{tweet:j})})})})},m=n(4),v=(n(18),n(9));n(20);var h=function(e){var t=Object(c.useRef)(""),n=function(t,n){var c=Object(m.a)(e.newTweets);201===n?(c.unshift(t),e.setNewTweets(c),u(e.username,e.callback)):alert("An error has occurred. Please try again")},a=function(c){c.preventDefault();var a,r,s,i=t.current.value;a=i,r=n,s=e.username,l("POST","/tweets/create/",r,{content:a,username:s}),t.current.value=""};return Object(d.jsx)("div",{className:"tweet-form-container",children:Object(d.jsx)("div",{className:"form_container",children:Object(d.jsxs)("form",{onSubmit:function(e){return a(e)},children:[Object(d.jsx)("textarea",{ref:t,required:!0,className:"form-control"}),Object(d.jsx)(v.a,{variant:"primary",children:"Tweet"})]})})})};var p=function(){return Object(d.jsx)("div",{children:"Hello World"})},x=(n(21),function(e){var t=e.newTweets,n=e.setNewTweets,a=e.tweets,r=e.setTweets,s=e.username,i=e.tweetsDidSet,o=e.callback,l=e.nextUrl,u=e.handleLoadNextResponse;return Object(c.useEffect)((function(){t.length>0&&(r([].concat(Object(m.a)(t),Object(m.a)(a))),n([]))}),[t]),Object(c.useEffect)((function(){!1===i&&j(o)}),[i,s]),Object(d.jsxs)("div",{className:"tweet_list__container",children:[a.map((function(e,t){return Object(d.jsx)(w,{tweet:e,idx:t,callback:o,currentUser:s},"".concat(t,"-{tweet.id}"))})),null!==l&&Object(d.jsx)("button",{className:"btn btn-outline btn-primary",onClick:function(e){e.preventDefault(),null!==l&&j(u,l)},children:"Load More"})]})});var N=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(!1),f=Object(i.a)(j,2),b=f[0],w=f[1],O=Object(c.useState)(null),v=Object(i.a)(O,2),N=v[0],k=v[1];function g(e,t){200===t?(u(e.results),w(!0),k(e.next)):alert("There was an error")}return Object(d.jsxs)("div",{className:"home-container",children:[Object(d.jsx)(p,{}),Object(d.jsxs)("div",{className:"twitter_feed",children:[Object(d.jsx)(h,{username:e.username,newTweets:a,setNewTweets:r,tweets:l,setTweets:u,tweetsDidSet:b,callback:g}),Object(d.jsx)(x,{newTweets:a,setNewTweets:r,tweets:l,setTweets:u,username:e.username,tweetsDidSet:b,setTweetsDidSet:w,callback:g,nextUrl:N,handleLoadNextResponse:function(e,t){if(200===t){var n=Object(m.a)(l).concat(e.results);u(n),k(e.next)}else alert("There was an error")}})]})]})},k=a.a.createElement,g=document.getElementById("root");if(g){var T=k(N,g.dataset);s.a.render(T,g)}var S=document.getElementById("tweet-detail-view");S&&s.a.render(k(O,S.dataset),S)}],[[22,1,2]]]);
//# sourceMappingURL=main.e8ac946f.chunk.js.map