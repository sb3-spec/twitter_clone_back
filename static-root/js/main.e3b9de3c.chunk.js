(this.webpackJsonpworse_twitter=this.webpackJsonpworse_twitter||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(8),r=n.n(a),i=n(2);var o=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),c=0;c<n.length;c++){var s=n[c].trim();if(s.substring(0,e.length+1)===e+"="){t=decodeURIComponent(s.substring(e.length+1));break}}return t};function l(e,t,n,c){var s;c&&(s=JSON.stringify(c));var a=new XMLHttpRequest,r="http://localhost:8000/api".concat(t),i=o("csrftoken");a.responseType="json",a.open(e,r),a.setRequestHeader("Content-Type","application/json"),i&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRFToken",i)),a.onload=function(){403===a.status&&(-1===window.location.href.indexOf("login")&&(window.location.href="/login?showLoginRequired=true"));n(a.response,a.status)},a.onerror=function(){n({message:"The request was an error"},400)},a.send(s)}function u(e,t,n){var c="/tweets/";e&&(c+="?username=".concat(e)),null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,t)}function j(e,t,n){var c="/tweets/feed/";null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,t,{username:e})}function d(e,t){var n="/tweets/data/";t&&(n+="".concat(t)),l("GET",n,e)}function b(e,t,n){var c="/tweets/";null!==t&&void 0!==t&&(c+="".concat(t,"/tweets/")),null!==n&&void 0!==n&&(c=n.replace("http://localhost:8000/api","")),l("GET",c,e)}var f=n(5),O=n.n(f),m=n(7);function x(e,t,n){l(n,"/profiles/".concat(t&&t),e)}var p=n(0),h=function(e){var t=e.user,n=e.hideLink,c=e.isProfile;return c&&console.log("this is the profile pic"),n?Object(p.jsx)("div",{className:"profile__picture__shell",children:Object(p.jsx)(w,{user:t,hideLink:n,children:Object(p.jsx)("span",{className:c?"profile__large bg-dark text-white rounded-circle":"px-3 py-2 my-2 rounded-circle bg-dark text-white",children:t.username?t.username[0]:"a"})})}):Object(p.jsx)("span",{className:c?"profile__large":"px-3 py-2 my-2 rounded-circle bg-dark text-white",children:t.username?t.username[0]:"a"})},w=function(e){var t=e.user,n=e.children;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("span",{className:"pointer",onClick:function(e){e.stopPropagation(),window.location.href="/profiles/".concat(t&&t.username)},children:n})})};function v(e){var t=e.user,n=e.includeFullName,c=e.hideLink,s=n?"".concat(t.first_name," ").concat(t.last_name):"".concat(t.username);return Object(p.jsxs)(p.Fragment,{children:[s," ",c?"@".concat(t.username):Object(p.jsx)(w,{user:t,children:"@".concat(t.username)})]})}var N=n(14),_=n.n(N),g=n.p+"static/media/forest_banner.2143f87a.jpg",k=(n(15),function(e){var t=e.username,n=e.className,s=Object(c.useState)(!1),a=Object(i.a)(s,2),r=a[0],o=a[1],l=Object(c.useState)(),u=Object(i.a)(l,2),j=u[0],d=u[1],b=function(e,t){o(!0),200===t?d(e):404===t?alert("There was an error finding the requested user"):alert("server issue")};return Object(c.useEffect)((function(){var e=function(){var e=Object(m.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:r||x(b,t,"GET");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()})),r?j?Object(p.jsx)(S,{user:j,setProfile:d,className:n}):Object(p.jsx)("span",{children:"User not found"}):"Loading"});function S(e){var t=e.user,n=e.setProfile,c=e.className,s=function(e,t){200===t?n(e):403===t?window.location.href="/login":alert("We could not find the profile in question. Please try again later.")};return t?Object(p.jsxs)("div",{className:"profile-container ".concat(c),children:[Object(p.jsx)("div",{className:"profile__banner_picture",children:Object(p.jsx)("img",{className:"banner-img",src:g,alt:"mountain in front of sunset"})}),Object(p.jsx)("div",{className:"profile__picture",children:Object(p.jsx)(h,{user:t,isProfile:!0,hideLink:!0})}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsx)("h3",{children:t.username}),Object(p.jsx)("p",{children:"@".concat(t.username)}),Object(p.jsx)("div",{className:"bio",children:t.bio}),Object(p.jsx)("div",{className:"location",children:t.location}),Object(p.jsxs)("div",{className:"follower-following-display",children:[Object(p.jsxs)("div",{className:"following-count",children:[Object(p.jsx)("p",{className:"number",children:_()(t.following_count||0).format("0a")}),Object(p.jsxs)("p",{className:"text",children:[" ","Following"," "]})]}),Object(p.jsxs)("div",{className:"follower-count",children:[Object(p.jsx)("p",{className:"number",children:_()(t.follower_count||0).format("0a")}),Object(p.jsxs)("p",{className:"text",children:[" ",1===t.follower_count?"Follower":"Followers"]})]})]})]}),Object(p.jsx)("div",{className:"profile__buttons",children:Object(p.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),t&&x(s,t.username,"POST")},className:"profile__action-button",children:"Edit Profile"})})]}):null}n(22);var T=function(e){var t=e.tweet,n=e.currentUser,s=e.setIsDeleted,a=Object(c.useState)(!1),r=Object(i.a)(a,2),o=r[0],u=r[1],j=Object(c.useState)([]),d=Object(i.a)(j,2),b=d[0],f=d[1],O=Object(c.createRef)();function m(e){var c=e.content,a=function(e,t){200===t&&s(!0)};return Object(p.jsx)("div",{className:"option",onClick:function(e){e.preventDefault(),e.stopPropagation(),u(!1),"Delete Tweet"===c&&function(e,t,n){var c="/tweets/";t&&(c+="".concat(t,"/delete/")),l("POST",c,e,{username:n})}(a,t.id,n)},children:Object(p.jsx)("p",{className:"option__content",children:c})})}return window.addEventListener("mousedown",(function(e){O.current&&!O.current.contains(e.target)&&(e.preventDefault(),e.stopPropagation(),u(!1))})),Object(c.useEffect)((function(){t.user&&(t.user.username!==n?f(["Report Tweet","Block @".concat(t.user.username),"Follow @".concat(t.user.username)]):f(["Delete Tweet","Pin to profile"]))}),[f,n,t.user]),o?Object(p.jsx)("div",{className:"modal__background",children:Object(p.jsx)("div",{className:"options-btn__toggled",ref:O,children:b.map((function(e){return Object(p.jsx)(m,{content:e,currentUser:n})}))})}):Object(p.jsx)("div",{onClick:function(e){e.stopPropagation(),e.preventDefault(),u(!0)},className:"options-btn__untoggled",children:Object(p.jsx)("i",{className:"fas fa-ellipsis-h options-icon"})})};n(23);var E=function e(t){var n=t.tweet,s=t.className,a=t.currentUser,r=(t.nextUrl,Object(c.useState)(!1)),o=Object(i.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)(!1),f=Object(i.a)(b,2),N=f[0],_=f[1],g=Object(c.useState)(n.likes?n.likes:0),k=Object(i.a)(g,2),S=k[0],E=k[1],U=Object(c.useState)(!1),D=Object(i.a)(U,2),y=D[0],L=D[1],P=Object(c.useState)(),R=Object(i.a)(P,2),C=(R[0],R[1]),q=Object(c.useState)(!1),G=Object(i.a)(q,2),H=G[0],F=G[1],I=Object(c.useState)(!1),M=Object(i.a)(I,2),B=M[0],X=M[1],J=function(e){e.preventDefault(),e.stopPropagation(),window.location.href="/".concat(n.id)},W=function(e,t){403===t?window.location.href="/login/":404!==t&&d(K,n.id)};function A(e,t){t.stopPropagation(),t.preventDefault();var c=e;if("like"===e)u&&(c="unlike");else if("retweet"===e&N)return;!function(e,t,n,c){l("POST","/tweets/action/",n,{id:e,action:t,username:c})}(n.id,c,W)}var z=function(t){t.callback;return n.parent?Object(p.jsxs)("div",{onClick:function(e){return J(e)},children:[Object(p.jsxs)("p",{className:"retweet-header",children:["retweeted by ",Object(p.jsx)(w,{user:n.user})]}),Object(p.jsx)(e,{tweet:n.parent,className:n.content?"retweet":"retweet no-border",currentUser:a})]}):null},K=function(e,t){200===t?(_(e.didRetweet),j(e.didLike),E(e.likes),X(!0),0===e.likes&&j(!1)):console.log(e,t)},Q=function(e,t){200===t?(C(e),F(!0)):console.log(e,t)};return Object(c.useEffect)((function(){var e=!0,t=function(){var t=Object(m.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:B||d(K,n.id),H||x(Q,n.user.username,"GET");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[H,B,n]),!y&&(n.content||n.parent)&&Object(p.jsxs)("div",{className:s+" overall-container",onClick:function(e){return J(e)},children:[!n.parent&&Object(p.jsxs)("div",{className:"profile-container d-flex",children:[Object(p.jsx)("div",{className:"mx-1 profile-picture",children:n.user?Object(p.jsx)(w,{children:Object(p.jsx)(h,{user:n.user})}):"Loading..."}),Object(p.jsx)("p",{className:"tweet-header",children:Object(p.jsx)(v,{user:n.user})}),Object(p.jsx)(T,{tweet:n,currentUser:a,setIsDeleted:L})]}),Object(p.jsxs)("div",{className:"tweet-container",children:[""!==n.content&&Object(p.jsx)("div",{className:"tweet-content-wrapper",children:Object(p.jsx)("p",{className:"tweet-text",children:"".concat(n.content)})}),n.parent?Object(p.jsx)("div",{className:"retweet-container",children:Object(p.jsx)(z,{})}):Object(p.jsxs)("div",{className:"buttons",children:[Object(p.jsx)("i",{className:N?"fas fa-retweet btn-icon rt-icon text-green":"fas fa-retweet btn-icon rt-icon",onClick:function(e){return A("retweet",e)}}),Object(p.jsxs)("div",{className:"like-btn__container",children:[Object(p.jsx)("i",{className:u?"fas fa-heart btn-icon like-icon red-text":"far fa-heart btn-icon like-icon",onClick:function(e){return A("like",e)}}),S]})]})]})]})};n(24);var U=function(e){var t=e.tweetId,n=Object(c.useState)(!1),s=Object(i.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(),u=Object(i.a)(o,2),j=u[0],d=u[1],b=Object(c.useState)(null),f=Object(i.a)(b,2),O=f[0],m=f[1],x=function(e,t){200===t&&m(e)},h=function(e,t){200===t&&d(e.username)};return Object(c.useEffect)((function(){!1===a&&(!function(e,t){var n="/tweets/";e&&(n+="".concat(e)),l("GET",n,t,{tweet_id:e})}(t,x),l("GET","/users/auth/",h),r(!0))}),[r,t,a]),null!==O&&Object(p.jsx)("div",{className:"detail-container",children:Object(p.jsx)("div",{className:"d-flex",children:Object(p.jsx)("div",{className:"col-11",children:Object(p.jsx)(E,{tweet:O,currentUser:j})})})})},D=n(6),y=n(11),L=n(3);var P=function(){return Object(p.jsx)("div",{})},R=(n(25),n(13),function(e){var t=e.newTweets,n=e.setNewTweets,s=e.tweets,a=e.setTweets,r=e.username,i=e.tweetsDidSet,o=e.callback,l=e.nextUrl,u=e.handleLoadNextResponse;return Object(c.useEffect)((function(){t.length>0&&(a([].concat(Object(D.a)(t),Object(D.a)(s))),n([]))}),[t]),Object(c.useEffect)((function(){var e=!0,t=function(){var t=Object(m.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(!1!==i){t.next=5;break}return t.next=5,j(r,o);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[i,r,o]),Object(p.jsxs)("div",{className:"tweet_feed__container",children:[s.map((function(e,t){return Object(p.jsx)(E,{tweet:e,idx:t,callback:o,currentUser:r,nextUrl:l},"".concat(t,"-{tweet.id}"))})),null!==l&&Object(p.jsx)("button",{className:"btn btn-outline btn-primary",onClick:function(e){e.preventDefault(),null!==l&&j(r,u,l)},children:"Load More"})]})});n(26);var C=function(e){var t=Object(c.useState)(),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(!1),o=Object(i.a)(r,2),j=o[0],d=o[1],b=e.username;console.log(b);var f=Object(c.useRef)(""),w=function(t,n){var c=Object(D.a)(e.newTweets);201===n?(c.unshift(t),e.setNewTweets(c),u(e.username,e.callback)):alert("An error has occurred. Please try again")},v=function(e,t){console.log(e),200===t&&a(e)};return Object(c.useEffect)((function(){var e=!0,t=function(){var t=Object(m.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:x(v,b,"GET");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return j||(t(),d(!0)),function(){e=!1}}),[j,b]),Object(p.jsxs)("div",{className:"tweet-form__container-outer",children:[Object(p.jsxs)("div",{className:"tweet-form__container-inner",children:[Object(p.jsx)("div",{className:"profile__container",children:Object(p.jsx)(h,{user:s||{username:"anon"}})}),Object(p.jsxs)("form",{className:"tweet-form",children:[Object(p.jsx)("label",{className:""}),Object(p.jsx)("textarea",{placeholder:"What's happening?",ref:f,required:!0,className:"tweet-form__textarea"})]})]}),Object(p.jsx)("div",{className:"tweet-form__buttons",children:Object(p.jsx)("button",{className:"tweet-form__submit",onClick:function(t){t.preventDefault();var n,c,s,a=f.current.value;""!==a&&(n=a,c=w,s=e.username,l("POST","/tweets/create/",c,{content:n,username:s})),f.current.value=""},children:"Tweet"})})]})},q=function(e){var t=e.newTweets,n=e.setNewTweets,s=e.tweets,a=e.setTweets,r=e.username,i=e.tweetsDidSet,o=e.callback,l=e.nextUrl,j=e.handleLoadNextResponse;return Object(c.useEffect)((function(){t.length>0&&(a([].concat(Object(D.a)(t),Object(D.a)(s))),n([]))}),[t,s,a,n]),Object(c.useEffect)((function(){!1===i&&u(r,o)}),[i,r,o]),Object(p.jsxs)("div",{className:"tweet_feed__container",children:[s.map((function(e,t){return Object(p.jsx)(E,{tweet:e,idx:t,callback:o,currentUser:r},"".concat(t,"-{tweet.id}"))})),null!==l&&Object(p.jsx)("button",{className:"btn btn-outline btn-primary",onClick:function(e){e.preventDefault(),null!==l&&u(r,j,l)},children:"Load More"})]})};n(27);var G=function(e){var t=e.currUser,n=e.newTweets,c=e.setNewTweets,s=e.tweets,a=e.setTweets,r=e.tweetsDidSet,i=e.callback,o=e.setTweetsDidSet,l=e.nextUrl,u=e.handleLoadNextResponse;return Object(p.jsxs)("div",{className:"twitter_feed",children:[Object(p.jsx)("div",{className:"home__header",children:Object(p.jsx)("p",{className:"header__content",children:"Home"})}),Object(p.jsxs)("div",{className:"twitter-feed__container",children:[Object(p.jsx)(C,{username:t,newTweets:n,setNewTweets:c,tweets:s,setTweets:a,tweetsDidSet:r,callback:i}),t?Object(p.jsx)(R,{newTweets:n,setNewTweets:c,tweets:s,setTweets:a,username:t,tweetsDidSet:r,setTweetsDidSet:o,callback:i,nextUrl:l,handleLoadNextResponse:u}):Object(p.jsx)(q,{newTweets:n,setNewTweets:c,tweets:s,setTweets:a,username:t,tweetsDidSet:r,setTweetsDidSet:o,callback:i,nextUrl:l,handleLoadNextResponse:u})]})]})};var H=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(!1),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(c.useState)(!0),d=Object(i.a)(j,2),f=d[0],O=d[1],m=Object(c.useState)(),x=Object(i.a)(m,2),h=x[0],w=x[1],v=e.user,N=e.handleLoadNextResponse,_=e.callback,g=function(e,t){console.log(e),200===t&&(a(e.results),u(!0),w(e.next))};return Object(c.useEffect)((function(){var e=!0;return!0===e&&(b(g,v),O(!1)),function(){e=!1}}),[O,N,v]),!f&&l?Object(p.jsxs)("div",{className:"tweet_feed__container",children:[s.map((function(e,t){return Object(p.jsx)(E,{tweet:e,idx:t,callback:_,currentUser:v},"".concat(t,"-{tweet.id}"))})),null!==h&&Object(p.jsx)("button",{className:"btn btn-outline btn-primary",onClick:function(e){e.preventDefault(),e.stopPropagation(),null!==h&&b(N,v,h)},children:"Load More"})]}):null};n(28);var F=function(e){var t=e.username,n=e.className,c=e.handleLoadNextResponse,s=e.nextUrl,a=e.callback;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"profile__header",children:Object(p.jsx)("p",{className:"profile__content",children:t})}),Object(p.jsxs)("div",{className:"profile__body",children:[Object(p.jsx)("div",{className:"profile",children:Object(p.jsx)(k,{username:t,className:n,handleLoadNextResponse:c})}),Object(p.jsx)(H,{user:t,handleLoadNextResponse:c,nextUrl:s,callback:a})]})]})};n(29);var I=function(e){var t=e.currentUser;function n(e){var t=e.content,n=e.currentUser,s=Object(c.useState)("/"),a=Object(i.a)(s,2),r=a[0],o=a[1],l=Object(c.useState)(""),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(c.useState)(!1),f=Object(i.a)(b,2),O=f[0],m=f[1];return Object(c.useEffect)((function(){"Profile"===t?o("/profile/".concat(n)):"Settings"===t?o("/settings"):"Messages"===t&&o("/messages")}),[t,n]),Object(c.useEffect)((function(){var e=window.location.href;e.includes("settings")?d("Settings"):e.includes("messages")?d("Messages"):e.includes("profile")?d("Profile"):"http://localhost:3000/"===e&&d("Home"),m(t===j),console.log(t,O)}),[j,t,O]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(y.b,{className:"navbar__link",to:r,children:Object(p.jsxs)("div",{className:"navbar__list-item ".concat(O&&"bold"),children:[Object(p.jsx)("div",{className:"list-item__icon",children:"Home"===t?Object(p.jsx)("i",{className:"fas fa-home text-thin"}):"Profile"===t?O?Object(p.jsx)("i",{className:"fas fa-user-circle"}):Object(p.jsx)("i",{class:"far fa-user-circle"}):"Settings"===t?O?Object(p.jsx)("i",{className:"fas fa-cog bold"}):Object(p.jsx)("i",{class:"fas fa-cog"}):"Messages"===t?O?Object(p.jsx)("i",{className:"fas fa-envelope"}):Object(p.jsx)("i",{className:"far fa-envelope"}):void 0}),Object(p.jsx)("div",{className:"list-item__content",children:t&&t})]})})})}return Object(p.jsx)("div",{className:"navbar__container__outer",children:Object(p.jsx)("div",{className:"navbar__container__inner",children:Object(p.jsxs)("ul",{className:"navbar__list",children:[Object(p.jsx)("li",{className:"navbar__header",children:Object(p.jsx)("i",{onClick:function(e){e.stopPropagation(),e.preventDefault(),"http://localhost:3000/"!==window.location.href&&(window.location.href="/")},className:"fab fa-twitter twitter-icon"})}),["Home","Profile","Messages","Settings"].map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)(n,{content:e,currentUser:t})})}))]})})})};var M=function(e){var t=Object(c.useState)([]),n=Object(i.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)([]),o=Object(i.a)(r,2),l=o[0],u=o[1],j=Object(c.useState)(!1),d=Object(i.a)(j,2),b=d[0],f=d[1],O=Object(c.useState)(),m=Object(i.a)(O,2),h=m[0],w=m[1],v=Object(c.useState)(),N=Object(i.a)(v,2),_=N[0],g=N[1],k=Object(c.useState)("Home"),S=Object(i.a)(k,2),T=S[0],E=S[1],U=e.username;function R(e,t){200===t?(u(e.results),f(!0),w(e.next)):alert("There was an error")}var C=function(e,t){if(200===t){var n=Object(D.a)(l).concat(e.results);u(n),w(e.next)}else alert("There was an error")},q=function(e,t){g(e.username)};return Object(c.useEffect)((function(){x(q,U,"GET")}),[U]),Object(p.jsx)(y.a,{children:Object(p.jsxs)("div",{className:"home-container",children:[Object(p.jsx)(I,{setCurrentSection:E,currentSection:T,currentUser:U}),Object(p.jsxs)(L.c,{children:[Object(p.jsx)(L.a,{exact:!0,path:"/",element:Object(p.jsx)(G,{currUser:_,newTweets:s,setNewTweets:a,tweets:l,setTweets:u,tweetsDidSet:b,callback:R,setTweetsDidSet:f,nextUrl:h,handleLoadNextResponse:C})}),Object(p.jsx)(L.a,{path:"profile/".concat(U||""),element:Object(p.jsx)(F,{username:U,callback:R,className:"profile-view",handleLoadNextResponse:C})}),Object(p.jsx)(L.a,{exact:!0,path:"messages",element:Object(p.jsx)(P,{})}),Object(p.jsx)(L.a,{exact:!0,path:"settings"})]})]})})},B=s.a.createElement,X=document.getElementById("root");X&&r.a.render(B(M,X.dataset),X);var J=document.getElementById("global_tweets");J&&r.a.render(Object(p.jsx)(q,{}),J);var W=document.getElementById("tweet_feed");if(W){var A=B(R,W.dataset);r.a.render(A,W)}var z=document.getElementById("tweet-detail-view");z&&r.a.render(B(U,z.dataset),z),document.querySelectorAll(".twitter-profile-badge").forEach((function(e){r.a.render(B(F,e.dataset),e)}));var K=document.getElementById("navbar");if(K){var Q=B(I,K.dataset);r.a.render(Q,K)}}],[[30,1,2]]]);
//# sourceMappingURL=main.e3b9de3c.chunk.js.map